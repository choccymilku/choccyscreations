<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>choc (WIP)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0">
    <link rel="icon" type="image/x-icon" href="./icon.png">
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/animation.css">
    <link rel="stylesheet" href="./styles/reactive.css">
    <link rel="stylesheet" href="./fonts/stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <script src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" />
<style>
    .noselect {
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
}

.disabledrag {
   -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
   -user-drag: none;
}

/* width */
::-webkit-scrollbar {
  width: 0px;
  height: 0px;
}

/* Track */
::-webkit-scrollbar-track {
  background: red;
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: green; 
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: yellow; 
}

.clickable {cursor: pointer;display: inline-block;}
</style>
</head>
<body id="body" class="light">
    <script>
        // Important to be 1st in the DOM
        const theme = localStorage.getItem('theme') || 'light';
        document.documentElement.dataset.appliedMode = theme;
      </script>
      <script>
      $(window).on('load', function() {
        $("#preloader").delay(0).fadeOut(300);
      });
      </script>
      <div id="yeaah"></div>
<!--       <div id="preloader"></div>
 --><!--     <div id="topbar">
        <div id="menu_wing" class="wing">
            <h1 id="menu_wing_text" class="noselect wing_text" style="font-size: 70px;">settings</h1>
        </div>
    </div>

    <div id="topbar" class="back_topbar" style="top:-150px">
    <div id="menu_wing_back" class="back_wing">
        <h1 class="noselect backwing_text" style="margin-left: 25px;font-size: 70px;margin-top: 35px;">back</h1>
    </div>
</div> -->

<div id="not_implemented">
  <div id="not_implemented_inner">
    <span style="font-size: 30px;">settings for mobile are not yet implemented, please use a desktop browser or switch to desktop mode</span><br>
    <span id="understood" style="background-color: var(--icon);padding: 10px;border-radius: 8px;position: absolute;cursor: pointer;">understood</span>
  </div>  
</div>

<div id="main">
  <div id="main_wrapper">
  <div id="left_side">
    <div id="left_side_wrapper">

      <div id="top_left">
        <a id="pfp_link">
          <img id="pfp" src="./blank.png"/>
          <div id="status_border">
              <div id="status"></div>
          </div>
        </a>
      </div>

      <div id="preloader_tester"></div>

      <div id="menu">
        <span class="clickable">theme: <span id="theme-toggle"></span></span>
        <span class="clickable">feel: <span id="feel-toggle"></span></span>
        <span class="clickable">clock format: <span id="toggleButton"></span></span>

        <span class="clickable">font: 
          <select id="font-selector">
            <option value="Geologica Roman">Geologica Roman</option>
            <option value="Noto Sans Mono">Noto Sans Mono</option>
<!--               <option value="OpenDyslexic3">OpenDyslexic3</option>
-->       </select>
        </span>
      </div>

        <div class="listening-to-spotify noselect" id="listening-to-spotify">
          <div class="listening-to-spotify-content" id="listening-to-spotify-content">
            <img class="listening-to-spotify-cover" id="listening-to-spotify-cover" style="background-color: var(--item_background);" src="./blank.png"></img>
              <a target="_blank" class="play-on-spotify-link" id="play-on-spotify-link">
                <i id="play-on-spotify-button" class="fa-brands fa-spotify"></i>
              </a>
          </div>     
            <div class="listening-to-spotify-info" id="listening-to-spotify-info">
              <h6 class="listening-to-spotify-song" id="listening-to-spotify-song"></h6>
              <h6 class="listening-to-spotify-artist" id="listening-to-spotify-artist"></h6>
              <div id="listening-to-spotify-elapsed-time-wrapper"></div> 
            </div> 
        </div>

      <div id="left_side_scrollable">
        <div id="bottom_left">
          <div id="friends">
            <div class="noselect" id="friends_inner"></div>
          </div>
        </div> 
      </div>

<!-- <span id="username"></span>-->        
    </div>
  </div>

  <div id="center_side">

    <div id="account_wrapper">
      <div id='accounts'></div>
    </div>

    <div id="settings_bg_wrapper">
      <div id="settings_bg">
        <i id="settings" class="fa-solid fa-gear"></i>
      </div> 
    </div>

  </div>
  
  <div id="right_side">
    <div class="noselect" id="top_right">
      <div id="text"></div>
    </div>
  </div>
</div>
</div>

    <!-- <h1 style="position: absolute;bottom: 0;left: 50%;transform: translateX(-50%);">WIP</h1>
    <h1 style="position: absolute;bottom: 0;left: 50%;transform: translateX(-50%);font-size: 10px;">( not optimized for mobile, expect bugs )</h1> -->
    
    <script>
      var canClick = true;
      
      document.getElementById("settings").addEventListener("click", function() {
        if (!canClick) {
          return; // Ignore the click if cooldown is active
        }
      
        var menu = document.getElementById("menu");
        var scroll = document.getElementById("left_side_wrapper");
        var settings = document.getElementById("settings");
      
        if (menu.style.display === "block") {
          menu.style.display = "none";
          scroll.style.overflowY = "scroll";
          settings.style.transform = "rotate(30deg)";
        } else {
          menu.style.display = "block";
          scroll.style.overflowY = "hidden";
          settings.style.transform = "rotate(120deg)";
          scroll.scrollTo(0, 0); // Scroll to the top of the div
        }
      
        canClick = false; // Disable further clicks temporarily
      
        setTimeout(function() {
          canClick = true; // Re-enable clicks after 1 second
        }, 1000);
      });
      </script>
      
<script>
  var container = document.querySelector('#left_side_scrollable');
  var scrollAmount = 0;
  var isScrolling = false;
  var snapThreshold = 50; // Adjust this value to control the snapping sensitivity
  
  container.addEventListener('wheel', function(event) {
    event.preventDefault();
    scrollAmount += event.deltaY;
    
    if (!isScrolling) {
      requestAnimationFrame(scrollContainer);
      isScrolling = true;
    }
  });
  
  function scrollContainer() {
    container.scrollLeft += scrollAmount * 0.1; // Adjust the scroll speed as desired
    
    scrollAmount *= 0.9; // Adjust the damping factor as desired
    
    if (Math.abs(scrollAmount) < 0.1) {
      // Determine the nearest snap point based on the scroll position
      var snapPoints = Array.from(container.children).map(function(element) {
        return element.offsetLeft - container.offsetLeft;
      });
      var targetIndex = snapPoints.findIndex(function(snapPoint) {
        return Math.abs(snapPoint - container.scrollLeft) < snapThreshold;
      });
      var targetSnapPoint = snapPoints[targetIndex];
      
      // Snap the container to the nearest snap point
      if (targetSnapPoint !== undefined) {
        container.scrollTo({
          left: targetSnapPoint,
          behavior: 'smooth'
        });
      }
      
      isScrolling = false;
      return;
    }
    
    requestAnimationFrame(scrollContainer);
  }
</script>

<script>
  var container = null;
  var scrollAmount = 0;
  var isScrolling = false;
  var snapThreshold = 50; // Adjust this value to control the snapping sensitivity

  function enableScript() {
    container = document.querySelector('#accounts');
    container.addEventListener('wheel', handleWheel);
  }

  function disableScript() {
    if (container) {
      container.removeEventListener('wheel', handleWheel);
      container = null;
    }
  }

  function handleWheel(event) {
    event.preventDefault();
    scrollAmount += event.deltaY;

    if (!isScrolling) {
      requestAnimationFrame(scrollContainer);
      isScrolling = true;
    }
  }

  function scrollContainer() {
    container.scrollLeft += scrollAmount * 0.1; // Adjust the scroll speed as desired

    scrollAmount *= 0.9; // Adjust the damping factor as desired

    if (Math.abs(scrollAmount) < 0.1) {
      // Determine the nearest snap point based on the scroll position
      var snapPoints = Array.from(container.children).map(function(element) {
        return element.offsetLeft - container.offsetLeft;
      });
      var targetIndex = snapPoints.findIndex(function(snapPoint) {
        return Math.abs(snapPoint - container.scrollLeft) < snapThreshold;
      });
      var targetSnapPoint = snapPoints[targetIndex];

      // Snap the container to the nearest snap point
      if (targetSnapPoint !== undefined) {
        container.scrollTo({
          left: targetSnapPoint,
          behavior: 'smooth'
        });
      }

      isScrolling = false;
      return;
    }

    requestAnimationFrame(scrollContainer);
  }

  function handleWindowResize() {
    if (window.innerWidth < 690) {
      if (!container) {
        enableScript();
      }
    } else {
      disableScript();
    }
  }

  // Initial check
  handleWindowResize();

  // Add event listener for window resize
  window.addEventListener('resize', handleWindowResize);
</script>



<script>
  $(document).ready(function($) {
    if (Modernizr.localstorage) {
      // Check if a font style is already set in localStorage
      var currentFontStyle = localStorage.getItem('fontStyle');
      if (!currentFontStyle) {
        // Set default value if it doesn't exist in localStorage
        currentFontStyle = 'Geologica Roman';
        localStorage.setItem('fontStyle', currentFontStyle);
      }
  
      // Set the selected option in the font selector dropdown
      $('#font-selector').val(currentFontStyle);
  
      // Apply the font style
      applyFontStyle(currentFontStyle);
  
      // Handle font style selection from the dropdown menu
      $('#font-selector').change(function() {
        var selectedFont = $(this).val();
        applyFontStyle(selectedFont);
        localStorage.setItem('fontStyle', selectedFont);
      });
    }
  });
  
  function applyFontStyle(fontStyle) {
    $('h1').css('font-family', fontStyle);
    $('h2').css('font-family', fontStyle);
    $('h6').css('font-family', fontStyle);
    $('span').css('font-family', fontStyle);
    $('div').css('font-family', fontStyle);
    $('#listening-to-spotify-elapsed-time-wrapper').css('font-family', fontStyle);
    
    if (fontStyle === 'Geologica Roman') {
      $('#username').css('padding-top', '10px');
      $('#username').css('padding-bottom', '10px');
      $('#discord-status').css('font-size', '22px');
    } else if (fontStyle === 'Noto Sans Mono') {
      $('#username').css('padding-top', '7px');
      $('#username').css('padding-bottom', '13px');
      $('#discord-status').css('font-size', '20px');
    } else if (fontStyle === 'OpenDyslexic3') {
    } else {
      $('#text').css('color', '');
    }
  }
</script>

<script>
  // Check if the feature has been understood previously
if (localStorage.getItem('featureUnderstood') === 'true') {
  // Hide the "not_implemented" element
  document.getElementById('not_implemented').style.display = 'none';
}

// Add click event listener to the "understood" button
document.getElementById('understood').addEventListener('click', function() {
  // Hide the "not_implemented" element
  document.getElementById('not_implemented').style.display = 'none';
  
  // Store the state in localStorage
  localStorage.setItem('featureUnderstood', 'true');
});

</script>


  

<script src="./code/config.js"></script>
<script src="./code/theme.js"></script>
<script src="./code/text.js"></script>
<script src="./code/apis/accounts.js"></script>
<script src="./code/apis/discord.js"></script>
<script src="./code/apis/pronounspage.js"></script>
<script src="./code/apis/friends.js"></script>
<script src="./code/apis/roblox.js"></script>
<script src="./code/apis/mastodon.js"></script>
<script src="./code/apis/github.js"></script>
<script src="./code/time.js"></script>
<!-- <script src="./code/winganim.js"></script>
<script src="./code/introanim.js"></script> -->
</body>
</html>